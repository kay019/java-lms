```mermaid
classDiagram

%% ================= Aggregate Root =================
class Session {
  +id: Long
  +metadata: SessionMetadata
  +enrollment: Enrollment
  +canEnroll(): Boolean
  +enroll(payment: Payment)
}

%% ================= Metadata =================
class SessionMetadata {
  +period: Period
  +coverImage: CoverImage
  +startAt(): LocalDate
  +endAt(): LocalDate
}

class Period {
  +start: LocalDate
  +end: LocalDate
}

class CoverImage {
  +url: String
  +size: Size
  +dimensions: Dimensions
  +type: ImageType
}

class Size {
  +bytes: long
  +isGreaterThan(size: Size): boolean
}

class Dimensions {
  +width: int
  +height: int
  +ratio(): double
}

%% ================= Enrollment =================
class Enrollment {
  +status: SessionStatus
  +enrollmentPolicy: EnrollmentPolicy
  +enrolledCount: int
  +canEnroll(): boolean
  +enroll(payment: Payment)
}

class EnrollmentPolicy {
  +price: Amount
  +maxCapacity: long
  +isFree(): boolean
  +hasCapacity(count: long): boolean
  +paymentMatches(amount: Amount): boolean
}

class Amount {
  +value: BigDecimal
  +isZero(): boolean
}

class Payment {
  +id: Long
  +amount: Amount
  +paymentDate: LocalDateTime
}

%% ================= Enumerations =================
class SessionStatus {
  <<enumeration>>
  PREPARING
  OPEN
  CLOSED
}

class ImageType {
  <<enumeration>>
  GIF
  JPG
  PNG
  SVG
}

%% ================= Relationships =================
Session "1" -- "1" SessionMetadata : has
Session "1" -- "1" Enrollment : manages
SessionMetadata "1" -- "1" Period : contains
SessionMetadata "1" -- "1" CoverImage : contains
CoverImage "1" -- "1" Size : has
CoverImage "1" -- "1" Dimensions : has
Enrollment "1" -- "1" EnrollmentPolicy : uses
Enrollment ".." --> ".." Payment : uses
EnrollmentPolicy "1" -- "1" Amount : uses
Payment "1" -- "1" Amount : has

```
